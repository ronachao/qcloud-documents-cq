## 介绍

Smart Home Skill API使用JSON消息格式与您的技能适配器进行通信。 技能适配器作为一个https服务可以架设在云平台上，也可以架设在您自己的服务器上。 该服务以包含Header和Payload对象的JSON格式的请求发送事件到您的技能适配器。 您的技能适配器返回JSON格式的响应，该响应还包含Header和Payload。 用于这些请求和响应的语法是技能适配器指令语言。 一个单独的请求或响应就是一个技能适配器指令。 在您的技能适配器的代码中，您需要根据指令头以确定Smart Home Skill API发送的消息类型。 您将使用消息有效内容的详细信息与客户的云连接设备进行通信，并响应指示操作成功或不成功。 以下是有关指令结构的一些细节。

## 认证

Smart Home Skill API遵循OAuth2.0规范。 从Smart Home Skill API发送到技能适配器的每个请求都包含OAuth访问令牌。 此外，任何可云控设备的设备云都必须支持授权码授权模式。 确保实施OAuth的第三方提供商已经将分配给智能家居技能的OAuth重定向地址添加到白名单中。 您可以在开发人员门户上的应用程序的配置页面上找到此URL。 要了解有关云平台小微身份验证如何工作的更多信息，请参阅{文档待定}。

## 技能适配器指令

所有技能适配器指令（无论是由Smart Home Skill API发送到适配器还是由适配器发送回Smart Home Skill API）共享相同的基本结构。 技能适配器指令包含两个顶级对象：

*   **Header**
*   **Payload**

另外，两个方向上的技能适配器指令的大小限制都是128KB。

## Message Headers

指令头具有一组在消息类型中相同的预期字段。 它们描述消息命名空间(namespace)，指令名称(name)，目标版本(payloadVersion)和唯一消息标识符(messageId)。 以下是典型的Message Header的JSON示例：

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "DiscoverAppliancesRequest",
        "namespace": "SmartHome.Discovery",
        "payloadVersion": "1"
    }
}
```

header必须包含以下属性：

| 参数 | 描述 |
| --- | --- |
| messageID | 单个请求或响应的唯一标识符。 这用于跟踪目的，技能适配器应该记录此信息，尽管它不应用于支持业务逻辑。 来自技能适配器的每条消息都必须填充此字段。 任何只包含数字字符及‘-’且长度短于128的字符串都是有效的，但是推荐使用随机数生成的UUID。 |
| name | 指令的名称，如_DiscoverAppliancesRequest_或_DiscoverAppliancesResponse_ |
| namespace | 指令所在的命名空间。 目前的类别有：SmartHome.Discovery、SmartHome.Control、SmartHome.Query |
| payloadVersion | 应用于**Payload**的API版本。 当前版本为1，该版本的payload格式在本文档中描述。 |

## Message Payload

技能适配器指令的**Payload**取决于在**Header**中指定的指令的名称，并且**Payload**属性将根据请求中包含的指令而有所不同。 每个指令类型详细描述有效载荷内容。

以下部分描述不同类型的指令，其预期的**Payload**描述和示例。

<table>
<thead>
<tr>
<th>任务</th>
<th>类别</th>
<th>指令名称</th>
</tr>
</thead>
<tbody>
<tr>
<td>发现已连接设备</td>
<td>SmartHome.Discovery</td>
<td>DiscoverAppliancesRequest<br>DiscoverAppliancesResponse</td>
</tr>
<tr>
<td>控制连接设备：打开、关闭，更改设置等</td>
<td>SmartHome.Control</td>
<td>DecrementColorTemperatureRequest<br>DecrementColorTemperatureConfirmation<br>DecrementPercentageRequest<br>DecrementPercentageConfirmation<br>DecrementBrightnessRequest<br>DecrementBrightnessConfirmation<br>IncrementColorTemperatureRequest<br>IncrementColorTemperatureConfirmation<br>IncrementPercentageRequest<br>IncrementPercentageConfirmation<br>IncrementTargetTemperatureRequest<br>IncrementTargetTemperatureConfirmation<br>IncrementBrightnessRequest<br>IncrementBrightnessConfirmation<br>SetColorRequest<br>SetColorConfirmation<br>SetColorTemperatureRequest<br>SetColorTemperatureConfirmation<br>SetPercentageRequest<br>SetPercentageConfirmation<br>SetBrightnessRequest<br>SetBrightnessConfirmation<br>SetTargetTemperatureRequest<br>SetTargetTemperatureConfirmation<br>TurnOnRequest<br>TurnOnConfirmation<br>TurnOffRequest<br>TurnOffConfirmation<br>ActivationSenceRequest<br>ActivationSenceConfirmation<br>DeactivateSenceRequest<br>DeactivateSenceConfirmation</td>
</tr>
<tr>
<td>查询连接设备的当前状态</td>
<td>SmartHome.Query</td>
<td>GetTargetTemperatureRequest<br>GetTargetTemperatureResponse<br>GetTemperatureReadingRequest<br>GetTemperatureReadingResponse</td>
</tr>
</tbody>
</table>

## Discovery Messages
这些消息类型用于发现该技能适配器可用的设备和功能。
_DiscoverAppliancesRequest_ DiscoverAppliancesResponse

### DiscoverAppliancesRequest
**示例语句**：
“小微，发现我的智能家居设备”
**目的**：发现与最终用户的设备云帐户相关的设备。 _DiscoverAppliancesRequest_从Smart Home Skill API发送到技能适配器，目的是发现与客户的设备云帐户相关的设备。如果没有设备可以发现，或者您的设备云遇到错误，则技能适配器应返回一个空的DiscoverAppliancesResponse，而不是错误消息。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DiscoverAppliancesRequest |
| namespace | SmartHome.Discovery |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌 | 是 |

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "DiscoverAppliancesRequest",
        "namespace": "SmartHome.Discovery",
        "payloadVersion": "1"
    },
    "payload": {
        "accessToken": "*OAuth Token here*"
    }
}
```

### DiscoverAppliancesResponse

**小微响应示例**：N/A
**目的**：返回与最终用户的设备云帐户相关联的所有设备。技能适配器对_DiscoverAppliancesRequest_的Smart Home Skill API的预期响应。如果没有要发现的设备或者您的设备云遇到错误，请返回一个空的discoveryAppliances数组。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DiscoverAppliancesResponse |
| namespace | SmartHome.Discovery |

#### Payload

<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
<th>是否必需</th>
</tr>
</thead>
<tbody>
<tr>
<td>discoveredAppliances</td>
<td>代表与客户的设备云帐户相关联的可发现设备的结构数组。 如果没有与客户帐户关联的设备，此属性应包含一个空数组。 如果发生错误，该属性可以为null。 数值的最大个数为300.列表中的每个项目的属性如下所示</td>
<td>是</td>
</tr>
<tr>
<td>discoveredAppliance.applianceId</td>
<td>设备标识符。 标识符在技能适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：_ - = # ; : ? @ &amp;。 标识符不能超过256个字符。</td>
<td>是</td>
</tr>
<tr>
<td>discoveredAppliance.manufacturerName</td>
<td>设备制造商的名称。 此值不能超过128个字符。</td>
<td>是</td>
</tr>
<tr>
<td>discoveredAppliance.modelName</td>
<td>设备型号名称。 此值不能超过128个字符。</td>
<td>是</td>
</tr>
<tr>
<td>discoveredAppliance.version</td>
<td>供应商提供的设备版本。 此值不能超过128个字符。</td>
<td>是</td>
</tr>
<tr>
<td>discoveredAppliance.friendlyName</td>
<td>客户用来识别设备的名称。 此值不能超过128个字符，不应包含特殊字符或标点符号。</td>
<td>是</td>
</tr>
<tr>
<td>discoveredAppliance.friendlyDescription</td>
<td>设备的可读描述。 此值不能超过128个字符。 描述应包含设备连接方式的描述。 例如，“通过Wink连接的WiFi温控器”。</td>
<td>是</td>
</tr>
<tr>
<td>discoveredAppliance.actions</td>
<td>此设备支持的一系列操作。 此指令的有效操作包括：<br>DecrementPercentage<br>DecrementColorTemperature<br>DecrementTargetTemperature<br>DecrementBrightness<br>GetTargetTemperature<br>GetTemperatureReading<br>IncrementPercentage<br>IncrementColorTemperature<br>IncrementTargetTemperature<br>IncrementBrightness<br>SetColor<br>SetColorTemperature<br>SetTargetTemperature<br>SetBrightness<br>TurnOff<br>TurnOn</td>
<td>是</td>
</tr>
<tr>
<td>discoveredAppliance.additionalApplianceDetails</td>
<td>提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。</td>
<td>是，但列表可以为空。</td>
</tr>
<tr>
<td>discoveredAppliance.icon</td>
<td>对应设备展示的图标。</td>
<td>是</td>
</tr>
<tr>
<td>supportScenes</td>
<td>客户自定义的场景列表。如果用户没有自定义场景，此属性应包含一个空数组。</td>
<td>是，但列表可以为空。</td>
</tr>
<tr>
<td>supportScene.sceneId</td>
<td>场景标识符。标识符在技能适配器的域内的最终用户拥有的所有场景上必须是唯一的。 此外，标识符需要在同一场景的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：_ - = # ; : ? @ &amp;。 标识符不能超过256个字符。</td>
<td>是</td>
</tr>
<tr>
<td>supportScene.sceneName</td>
<td>场景名称</td>
<td>是</td>
</tr>
<tr>
<td>supportScene.actions</td>
<td>场景支持的操作。此指令的有效操作包括：<br>ActivationSence<br>DeactivateSence</td>
<td>是</td>
</tr>
<tr>
<td>supportScene.icon</td>
<td>对应场景展示的图标。</td>
<td>是</td>
</tr>
</tbody>
</table>

```
 {
    "header": {
        "messageId": "9ed9747d-caee-429e-b7ce-9104c82550ea",
        "name": "DiscoverAppliancesResponse",
        "namespace": "SmartHome.Discovery",
        "payloadVersion": "1"
    },
    "payload": {
        "discoveredAppliances": [
            {
                "actions": [
                    "IncrementTargetTemperature",
                    "DecrementTargetTemperature",
                    "GetTargetTemperature",
                    "SetTargetTemperature"
                ],
                "additionalApplianceDetails": {
                    "extraDetail1": "optionalDetailForSkillAdapterToReferenceThisDevice",
                    "extraDetail2": "There can be multiple entries",
                    "extraDetail3": "but they should only be used for reference purposes.",
                    "extraDetail4": "This is not a suitable place to maintain current device state"
                },
                "applianceId": "uniqueThermostatDeviceId",
                "friendlyDescription": "descriptionThatIsShownToCustomer",
                "friendlyName": " Bedroom Thermostat",
                "manufacturerName": "yourManufacturerName",
                "modelName": "fancyThermostat",
                "version": "your software version number here."
            },
            {
                "actions": [
                    "IncrementPercentage",
                    "DecrementPercentage",
                    "IncrementColorTemperature",
                    "DecrementColorTemperature",
                    "IncrementBrightness",
                    "DecrementBrightness",
                    "SetPercentage",
                    "SetColor",
                    "SetColorTemperature",
                    "SetBrightness",
                    "TurnOn",
                    "TurnOff"
                ],
                "additionalApplianceDetails": {},
                "applianceId": "uniqueLightDeviceId",
                "friendlyDescription": "descriptionThatIsShownToCustomer",
                "friendlyName": "Living Room",
                "manufacturerName": "yourManufacturerName",
                "modelName": "fancyLight",
                "version": "your software version number here."
            }
        ],
        "supportScenes": [
            {
                "actions": [
                    "ActivationSence"
                ],
                "sceneId": "uniqueSceneId",
                "sceneName": "回家",
                "icon": "iconUrl"
            },
            {
                "actions": [
                    "ActivationSence",
                    "DeactivateSence"
                ],
                "sceneId": "uniqueSceneId",
                "sceneName": "吃饭",
                "icon": "iconUrl"
            }
        ]
    }
}
```

## 开/关消息(On/Off Messages)
此消息类型用于打开或关闭目标设备。 这些消息通常由几种不同类型的设备使用。

### TurnOnRequest

**示例语句**：
“小微，打开空调”
**目的**：请求打开指定的设备。 从Smart Home Skill API发送到技能适配器。

#### Header

| 属性 | 值 |
| --- | --- |
| name | TurnOnRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：_ - = # ; : ? @ 。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |

TurnOnRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "TurnOnRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            }
        }
    }
```

### TurnOnConfirmation

**小微响应示例**：“好的”
**目的**：表示设备已成功打开。 对于成功的TurnOnRequest，技能适配器对Smart Home Skill API的预期响应。

#### Header

| 属性 | 值 |
| --- | --- |
| name | TurnOnConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |
TurnOnConfirmation_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "TurnOnConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

### TurnOffRequest

**示例语句**：
“小微，关闭空调”
目的：请求关闭指定的设备。 从Smart Home Skill API发送到技能适配器。

#### Header

| 属性 | 值 |
| --- | --- |
| name | TurnOffRequest |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：_ - = # ; : ? @ &。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |

_TurnOffRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "TurnOffRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            }
        }
    }
```

### TurnOffConfirmation

**小微响应示例**：“好的”
**目的**：表示设备已成功打开。 对于成功的TurnOffRequest，技能适配器对Smart Home Skill API的预期响应。

#### Header
| 属性 | 值 |
| --- | --- |
| name | TurnOffConfirmation |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_TurnOffConfirmation_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "TurnOffConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

## 可调光照控制消息(Tunable Lighting Control Messages)
这些信息设置一个灯的颜色，或设置，增加和减少可调白光的色温

以下指令要求并响应对可变色光的色调的变化。 照明颜色以色相，饱和度，亮度（HSB）值进行测量。
_SetColorRequest_ SetColorConfirmation

以下指令请求并响应可调白光的色温变化。 可调的白光是一种光，您可以调整白色的“温度”。 色温值用开尔文测量。 Smart Home Skill API支持2200K（暖白）至7000K（冷白）的值，其中2700K相当于柔和的白色紧凑型荧光灯或LED灯。
_SetColorTemperatureRequest_ SetColorTemperatureConfirmation _IncrementColorTemperatureRequest_ IncrementColorTemperatureConfirmation _DecrementColorTemperatureRequest_ DecrementColorTemperatureConfirmation

需要注意的是，增量色温请求是当客户要求增加亮度的亮度时发送的指令，这导致更高的色温值。 相反降低色温的请求是当客户要求更暖的光线时发出的指令，这导致较低的色温值。

### SetColorRequest
**示例语句**：
“小微, 帮我设置{设备名}的灯光颜色为白色”
“小微, 卧室灯颜色设置为白色”
**目的**：在指定的设备上请求照明颜色更改。 从Smart Home Skill API 发送到技能适配器。

#### Heade

| 属性 | 值 |
| --- | --- |
| name | SetColorRequest |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| color object | 描述为灯设置的颜色。 在色相，饱和度，亮度（HSB）颜色模型中指定。 | 是 |
| color.hue | double类型，表示需要设置的色调。 有效范围为0.00〜360.00（含）。 | 是 |
| color.saturation | double类型，表示需要设置的饱和度。 有效范围为0.0000至1.0000（含）。 | 是 |
| color.brightness | double类型，表示需要设置的亮度。 有效范围为0.0000至1.0000（含）。 | 是 |

_SetColorRequest_示例：

```
{
  "header": {
    "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
    "namespace": "SmartHome.Control",
    "name": "SetColorRequest",
    "payloadVersion": "1"
  },
  "payload": {
    "accessToken": "[OAuth Token here]",
    "appliance": {
      "applianceId": "[Device ID for RGB-capable bulb]",
      "additionalApplianceDetails": {}
    },
    "color": {
      "hue": 0.0,
      "saturation": 1.0000,
      "brightness": 1.0000
    }
  }
}
```

### SetColorConfirmation

**小微响应示例**：“好的”
**目的**：表示设备已成功更改为请求的颜色。 对SetColorRequest的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header

| 属性 | 值 |
| --- | --- |
| name | SetColorConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| achievedState object | 指示颜色更改后设备的状态。 此对象是必需的，但请注意，如果无法查询设备的状态，或者不希望引起查询的额外延迟，则可以返回SetColorRequest中发送的值。 | 是 |
| achievedState.color object | 表示颜色变化后设备的颜色。 | 是 |
| color.hue | double类型，表示设置后的色调。 有效范围为0.00〜360.00（含）。 | 是 |
| color.saturation | double类型，表示设置后的饱和度。 有效范围为0.0000至1.0000（含）。 | 是 |
| color.brightness | double类型，表示设置后的亮度。 有效范围为0.0000至1.0000（含）。 | 是 |

_SetColorConfirmation_示例：

```
{
  "header": {
    "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
    "namespace": "SmartHome.Control",
    "name": "SetColorConfirmation",
    "payloadVersion": "1"
  },
  "payload": {
    "achievedState": {
      "color": {
        "hue": 0.0,
         "saturation": 1.0000,
         "brightness": 1.0000
      }
    }
  }
}
```

### SetColorTemperatureReques

**示例语句**： “小微，设置客厅灯为暖光”
**目的**：请求将指定设备的色温更改为指定设置。从Smart Home Skill API发送到技能适配器。下表列出了智能家居技巧API会发送的一些可能的色温请求和相关值。如果您的照明设备不支持请求的值，建议您将设备设置为最接近的值。

| 白色色调 | 温度值（开氏度） |
| --- | --- |
| 暖光 | 2200 |
| 柔光 | 2700 |
| 白光 | 4000 |
| 日光 | 5500 |
| 冷光 | 7000 |

#### Header

| 属性 | 值 |
| --- | --- |
| name | SetColorTemperatureRequest |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| colorTemperature | 对象描述为灯设置的色温。以开尔文度表示。 | 是 |
| colorTemperature.value | 以开尔文度表示所请求的色温的整数。有效范围为1000～10000(含)。 | 是 |

_SetColorTemperatureRequest_示例：

```
{
  "header": {
    "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
    "name": "SetColorTemperatureRequest",
    "namespace": "SmartHome.Control",
    "payloadVersion": "1"
  },
  "payload": {
    "accessToken": "[OAuth Token here]",
    "appliance": {
      "additionalApplianceDetails": {},
      "applianceId": "[Device ID]"
    },
    "colorTemperature": {
      "value": 2700
    }
  }
}
```

### SetColorTemperatureConfirmation

**小微响应示例**：“好的” **目的**：表示设备已成功更改为要求的色温。对_SetColorTemperatureRequest_的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | SetColorTemperatureConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| achievedState对象 | 指示颜色更改后设备的状态。此对象是必需的，但请注意，如果无法查询设备的状态，或者不希望引起查询的额外延迟，则可以返回_SetColorTemperatureRequest_中发送的值。 | 是 |
| achievedState.colorTemperature对象 | 表示颜色变化后设备的色温。 | 是 |
| colorTemperature.value | 表示以开尔文度为单位的色温设置的整数。有效范围为1000〜10000（含）。 | 是 |

_SetColorTemperatureConfirmation_示例：

```
{
  "header": {
    "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
    "name": "SetColorTemperatureConfirmation",
    "namespace": "SmartHome.Control",
    "payloadVersion": "1"
  },
  "payload": {
    "achievedState": {
      "colorTemperature": {
        "value": 2700
      }
    }
  }
}
```

### IncrementColorTemperatureRequest

**示例语句**：
“小微，把客厅灯设置的更冷一些”
**目的**：要求将指定设备的色温设置为较冷的灯光设置，这意味着提高设备的开尔文温度值。从Smart Home Skill API发送到技能适配器。此指令不指定特定设置，但要求相对于当前设备设置的更冷/更白的设置。您可以根据当前的设置，功能和其他值选择多少调整指定设备的设置。如果设备不能进一步增加，请将其设置为其最大色温。如果您收到此指令，并且指定的设备当前设置为颜色，则应返回NotSupportedInCurrentModeError，将currentDeviceMode设置为COLOR。

#### Header

| 属性 | 值 |
| --- | --- |
| name | IncrementColorTemperatureRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |

_IncrementColorTemperatureRequest_示例：

```
{
  "header": {
    "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
    "name": "IncrementColorTemperatureRequest",
    "namespace": "SmartHome.Control",
    "payloadVersion": "1"
  },
  "payload": {
    "accessToken": "[OAuth Token here]",
    "appliance": {
      "additionalApplianceDetails": {},
      "applianceId": "[Device ID]"
    }
  }
}
```

### IncrementColorTemperatureConfirmation

**小微响应示例**：“好的”
**目的**：表示设备已成功提高了色温。对_IncrementColorTemperatureRequest_的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header

| 属性 | 值 |
| --- | --- |
| name | IncrementColorTemperatureConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| achievedState对象 | 指示色温提高后设备的状态。 | 是 |
| achievedState.colorTemperature对象 | 表示色温提高后设备的色温。 | 是 |
| colorTemperature.value | 表示以开尔文度为单位的色温设置的整数。有效范围为1000〜10000（含）。 | 是 |

_IncrementColorTemperatureConfirmation_示例：

```
{
  "header": {
    "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
    "name": "IncrementColorTemperatureConfirmation",
    "namespace": "SmartHome.Control",
    "payloadVersion": "1"
  },
  "payload": {
    "achievedState": {
      "colorTemperature": {
        "value": 2700
      }
    }
  }
}
```

### DecrementColorTemperatureRequest
**示例语句**：
“小微，把客厅灯设置的更暖一些”
**目的**：要求将指定设备的色温设置为较暖的灯光设置，这意味着降低设备的开尔文温度值。从Smart Home Skill API发送到技能适配器。此指令不指定特定设置，但要求相对于当前设备设置的更暖／更柔的设置。您可以根据当前的设置，功能和其他值选择多少调整指定设备的设置。如果设备不能进一步降低，请将其设置为其最小色温。如果您收到此指令，并且指定的设备当前设置为颜色，则应返回NotSupportedInCurrentModeError，将currentDeviceMode设置为COLOR。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DecrementColorTemperatureRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |

```
{
  "header": {
    "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
    "name": "DecrementColorTemperatureRequest",
    "namespace": "SmartHome.Control",
    "payloadVersion": "1"
  },
  "payload": {
    "accessToken": "[OAuth Token here]",
    "appliance": {
      "additionalApplianceDetails": {},
      "applianceId": "[Device ID",
    }
  }
}
```

### DecrementColorTemperatureConfirmation

**小微响应示例**：“好的”
**目的**：表示设备已成功降低了色温。对_DecrementColorTemperatureRequest_的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DecrementColorTemperatureConfirmation |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| achievedState对象 | 指示色温降低后设备的状态。 | 是 |
| achievedState.colorTemperature对象 | 表示色温降低后设备的色温。 | 是 |
| colorTemperature.value | 表示以开尔文度为单位的色温设置的整数。有效范围为1000〜10000（含）。 | 是 |

_DecrementColorTemperatureConfirmation_示例：

```
{
  "header": {
    "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
    "name": "DecrementColorTemperatureConfirmation",
    "namespace": "SmartHome.Control",
    "payloadVersion": "1"
  },
  "payload": {
    "achievedState": {
      "colorTemperature": {
        "value": 2700
      }
    }
  }
}
```

## 温度控制和查询消息(Temperature Control and Query Messages)

这些消息类型包含温度，并提供获取和设置设备温度的指令。 重要的是要注意，Smart Home Skill API始终将摄氏温度设置传递给您的技能适配器，而您的技能适配器应该以摄氏温度返回温度。 您还需要将温度保存至少两位小数，这能确保内部转换需要的足够精度。
_GetTemperatureReadingRequest_ GetTemperatureReadingResponse _GetTargetTemperatureRequest_ GetTargetTemperatureResponse _SetTargetTemperatureRequest_ SetTargetTemperatureConfirmation _IncrementTargetTemperatureRequest_ IncrementTargetTemperatureConfirmation _DecrementTargetTemperatureRequest_ DecrementTargetTemperatureConfirmation

### GetTemperatureReadingRequest
**示例语句**：
“小微，空调的温度现在是多少？”
**目的**：请求指定设备的温度读数。 从Smart Home Skill API 发送到技能适配器。

#### Header

| 属性 | 值 |
| --- | --- |
| name | GetTemperatureReadingRequest |
| namespace | SmartHome.Query |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_-=#;:?@&`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |

_GetTemperatureReadingRequest_示例：

```
{
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "GetTemperatureReadingRequest",
            "namespace": "SmartHome.Query",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "applianceId": "[Device ID for the specified thermostat, thermometer, or temperature sensor]",
                "additionalApplianceDetails": { }
            },
       }
}
```

### GetTemperatureReadingResponse

**小微响应示例**：“空调的温度是26摄氏度”
**目的**：说明指定设备的当前温度读数。 对_GetTemperatureReadingRequest_的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | GetTemperatureReadingResponse |
| namespace | SmartHome.Query |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| temperatureReading object | 表示来自指定设备的温度读数，以摄氏度为单位。 | 是 |
| temperatureReading.value | 浮点数，表示以摄氏度为单位的温度。 | 是 |
| applianceResponseTimestamp | 指示从目标设备检索到温度的最后更新时间。 这有助于表明响应的新鲜度，这可能会影响小微的响应。 该值的精度是特定于设备的，可以由技能适配器估计。 | 否 |

_GetTemperatureReadingResponse_示例：

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "GetTemperatureReadingResponse",
        "namespace": "SmartHome.Query",
        "payloadVersion": "1"
    },
    "payload": {
        "temperatureReading": {
            "value": 26.00
        },
        "applianceResponseTimestamp": "2017-05-12T00:20:50.52Z"
    }
}
```

### GetTargetTemperatureRequest
**示例语句**：
“小微，空调的温度设置到几度了？”
**目的**：请求指定设备的当前设定温度（设定值）。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | GetTargetTemperatureRequest |
| namespace | SmartHome.Query |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |

_GetTargetTemperatureRequest_示例：

```
{
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "GetTargetTemperatureRequest",
            "namespace": "SmartHome.Query",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "applianceId": "[Device ID for the specified thermostat, thermometer, or temperature sensor]",
                "additionalApplianceDetails": { }
            },
       }
}
```

### GetTargetTemperatureResponse
**小微响应示例**：“空调的设置温度是26摄氏度”
**目的**：提供指定设备的目标温度设置（设定值）。 对_GetTargetTemperatureRequest_的预期响应，并从技能适配器发送到Smart Home Skill API。
#### Header
| 属性 | 值 |
| --- | --- |
| name | GetTargetTemperatureResponse |
| namespace | SmartHome.Query |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| targetTemperature object | 表示设备在单设定点模式下以摄氏度设置的目标温度。 | 否 |
| temperatureReading.value | 浮点数，表示目标温度（摄氏度）。 | 是，当temperatureReading.value存在时 |
| coolingTargetTemperature object | 表示制冷的目标温度（设定值），单位为摄像度，当设备具有双设定值时。 通常结合heatingTargetTemperature对象。 | 否 |
| coolingTargetTemperature.value | 浮点数，表示制冷的目标温度，单位为摄氏度。 | 是，当coolingTargetTemperature存在时 |
| heatingTargetTemperature object | 表示制热的目标温度（设定值），单位为摄像度，当设备具有双设定值时。 通常结合coolingTargetTemperature对象。 | 否 |
| heatingTargetTemperature.value | 浮点数，表示制热的目标温度，单位为摄氏度。 | 是，当heatingTargetTemperature存在时 |
| temperatureMode object | 表示设备设定的运行模式 | 是 |
| temperatureMode.value | 指示设备设置的温度模式的字符串。 有效值为：<br>AUTO：表示自动加热/冷却选择<br>COOL：表示冷却模式<br>HEAT：表示加热模式<br>ECO：表示经济模式<br>OFF：表示加热/冷却已关闭，尽管设备可能仍然有电 | 是 |
| applianceResponseTimestamp | 指示目标设备设定温度的最后更新时间。 这有助于表明响应的新鲜度，这可能会影响小微的响应。 该值的精度是特定于设备的，可以由技能适配器估计。 | 否 |

_GetTargetTemperatureResponse_单个设定值的示例：

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "GetTargetTemperatureResponse",
        "namespace": "SmartHome.Query",
        "payloadVersion": "1"
    },
    "payload": {
        "targetTemperature": {
            "value": 25:50
        },
        "temperatureMode": {
            "value": "HEAT"
        }
    }
}
```

_GetTargetTemperatureResponse_双设定值的示例：

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "GetTargetTemperaturesResponse",
        "namespace": "SmartHome.Query",
        "payloadVersion": "1"
    },
    "payload": {
        "coolingTargetTemperature": {
            "value": 26:00
        },
        "heatingTargetTemperature": {
            "value": 28:00
        },
        "temperatureMode": {
            "value": "AUTO"
        }
    }
}
```

_GetTargetTemperatureResponse_关闭模式时的示例：

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "GetTargetTemperatureResponse",
        "namespace": "SmartHome.Query",
        "payloadVersion": "1"
    },
    "payload": {
        "temperatureMode": {
            "value": "OFF"
        }
    }
}
```

### SetTargetTemperatureRequest

示例语句：
“小微，设置空调温度到25度”
**目的**：将指定设备设置为指定的温度，单位为摄氏度。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | SetTargetTemperatureRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| targetTemperature | 设置由applianceId指定的设备的目标温度（摄氏度）。 | 是 |
| targetTemperature.value | 一个浮点数，设定的目标温度 | 是 |

_SetTargetTemperatureRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "SetTargetTemperatureRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            },
            "targetTemperature": {
                "value": 26.00
            }
        }
    }
```

### SetTargetTemperatureConfirmation
**小微响应示例**：“空调已设置成26摄氏度”
**目的**：表示目标温度设置成功。 对_SetTargetTemperatureRequest_的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | SetTargetTemperatureConfirmation |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| targetTemperature | 指示设备设置的目标温度（以摄氏度为单位）的对象。 仅包含一个值是数字的属性_value_。 | 是 |
| temperatureMode | 指示设备设置的温度模式的对象。 包含单个属性_value_，其值为以下字符串之一：AUTO，COOL，HEAT。 | 是 |
| previousState object | 表示设备的先前模式和温度。 | 是 |
| previousState.targetTemperature | 指示设备设置的目标温度（以摄氏度为单位）的对象。 仅包含一个值是数字的属性_value_。 | 是 |
| previousState. temperatureMode | 指示设备设置的温度模式的对象。 包含单个属性_value_，其值为以下字符串之一：AUTO，COOL，HEAT。 | 是 |

_SetTargetTemperatureConfirmation_示例：

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "SetTargetTemperatureConfirmation",
        "namespace": "SmartHome.Control",
        "payloadVersion": "1"
    },
    "payload": {
        "targetTemperature": {
            "value": 25.0
        },
        "temperatureMode": {
            "value": "AUTO"
        },
        "previousState": {
            "targetTemperature": {
                "value": 21.0
            },
            "temperatureMode": {
                "value": "AUTO"
            }
        }
    }
}
```

### IncrementTargetTemperatureRequest

**示例语句**：
“小微，空调温度调高一度”
**目的**：请求指定设备的温度以指定的数量（摄氏度）升高。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | IncrementTargetTemperatureRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| deltaTemperature | 指示要增加的温度数值对象（以摄氏度表示）。 仅包含一个值为数字的属性_value_。 | 是 |

_IncrementTargetTemperatureRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "IncrementTargetTemperatureRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            " deltaTemperature": {
                "value": 1.0
            },
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            }
        }
    }
```

### IncrementTargetTemperatureConfirmation

**_小微响应示例_：“好的”** 目的：表示设备的目标温度成功增加。 这是对_IncrementTargetTemperatureRequest*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | IncrementTargetTemperatureConfirmation |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| targetTemperature | 指示设备设置的目标温度（以摄氏度为单位）的对象。 仅包含一个值是数字的属性_value_。 | 是 |
| temperatureMode | 指示设备设置的温度模式的对象。 包含单个属性_value_，其值为以下字符串之一：AUTO，COOL，HEAT。 | 是 |
| previousState object | 表示设备的先前模式和温度。 | 是 |
| previousState.targetTemperature | 指示设备设置的目标温度（以摄氏度为单位）的对象。 仅包含一个值是数字的属性_value_。 | 是 |
| previousState. temperatureMode | 指示设备设置的温度模式的对象。 包含单个属性_value_，其值为以下字符串之一：AUTO，COOL，HEAT。 | 是 |

_IncrementTargetTemperatureConfirmation_示例：

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "IncrementTargetTemperatureConfirmation",
        "namespace": "SmartHome.Control",
        "payloadVersion": "1"
    },
    "payload": {
        "targetTemperature": {
            "value": 25.0
        },
        "temperatureMode": {
            "value": "AUTO"
        },
        "previousState": {
            "targetTemperature": {
                "value": 21.0
            },
            "temperatureMode": {
                "value": "AUTO"
            }
        }
    }
}
```

### DecrementTargetTemperatureRequest
**示例语句**：
“小微，空调温度调低一度”
**目的**：请求指定设备的温度降低指定的数量，以摄氏度为单位。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DecrementTargetTemperatureRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| deltaTemperature | 指示要降低的温度数值对象（以摄氏度表示）。 仅包含一个值为数字的属性_value_。 | 是 |

_DecrementTargetTemperatureRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "DecrementTargetTemperatureRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            " deltaTemperature": {
                "value": 1.0
            },
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            }
        }
    }
```

### DecrementTargetTemperatureConfirmation

**小微响应示例_：“好的”** 目的：表示设备的目标温度成功降低。 这是对_DecrementTargetTemperatureRequest*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DecrementTargetTemperatureConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| targetTemperature | 指示设备设置的目标温度（以摄氏度为单位）的对象。 仅包含一个值是数字的属性_value_。 | 是 |
| temperatureMode | 指示设备设置的温度模式的对象。 包含单个属性_value_，其值为以下字符串之一：AUTO，COOL，HEAT。 | 是 |
| previousState object | 表示设备的先前模式和温度。 | 是 |
| previousState.targetTemperature | 指示设备设置的目标温度（以摄氏度为单位）的对象。 仅包含一个值是数字的属性_value_。 | 是 |
| previousState. temperatureMode | 指示设备设置的温度模式的对象。 包含单个属性_value_，其值为以下字符串之一：AUTO，COOL，HEAT。 | 是 |

_DecrementTargetTemperatureConfirmation_示例：

```
{
    "header": {
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "name": "DecrementTargetTemperatureConfirmation",
        "namespace": "SmartHome.Control",
        "payloadVersion": "1"
    },
    "payload": {
        "targetTemperature": {
            "value": 25.0
        },
        "temperatureMode": {
            "value": "AUTO"
        },
        "previousState": {
            "targetTemperature": {
                "value": 21.0
            },
            "temperatureMode": {
                "value": "AUTO"
            }
        }
    }
}
```

## Percentage Messages

以下这些消息类型，以增加或减少百分比的形式设置目标设备的属性。 _SetPercentageRequest_ SetPercentageConfirmation _IncrementPercentageRequest_ IncrementPercentageConfirmation _DecrementPercentageRequest_ DecrementPercentageConfirmation

### SetPercentageRequest

**示例语句**：
“小微，设置{设备名}到50%”
**目的**：请求以指定的百分比调整指定设备的数值设置。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | SetPercentageRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| percentageState | 设置的百分比，精度可达两位小数。 范围从0.00到100.00（含）。 | 是 |

_SetPercentageRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": " SetPercentageRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            },
            "percentageState": {
                "value": 50.0
            }
        }
    }
```

### SetPercentageConfirmation
**_小微响应示例_：“好的”** 目的_*：表示设备已成功调整了指定的百分比。 这是对_SetPercentageRequest*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header

| 属性 | 值 |
| --- | --- |
| name | SetPercentageConfirmation |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_SetPercentageConfirmation_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": " SetPercentageConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

### IncrementPercentageRequest

**示例语句**：
“小微，{设备名}调高20%”
**目的**：以指定增加的百分比调整指定设备的数值设置。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | IncrementPercentageRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| deltaPercentage | 对于此指令，deltaPercentage将添加到当前百分比设置中。 例如，如果设备当前设置为40％，则deltaPercentage值为15表示设备在请求完成后将被设置为55％。是double类型，范围介于0.00和100.00之间（含）。如果deltaPercentage值在允许的范围内，但超出了目标设备允许的最大值，则返回ValueOutOfRangeError，并且不会更改设备设置。 | 是 |

_IncrementPercentageRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "IncrementPercentageRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            },
            "deltaPercentage": {
                "value": 10.0
            }
        }
    }
```

### IncrementPercentageConfirmation

**_小微响应示例_：“好的”** 目的_*：表示设备成功增加了指定的百分比。 这是对_IncrementPercentageRequest*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | IncrementPercentageConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_IncrementPercentageConfirmation_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": " IncrementPercentageConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

### DecrementPercentageRequest

**示例语句**：
“小微，{设备名}调低20%”
**目的**：以指定减小的百分比调整指定设备的数值设置。 从Smart Home Skill API发送到技能适配器。

#### Header

| 属性 | 值 |
| --- | --- |
| name | DecrementPercentageRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| deltaPercentage | 对于此指令，deltaPercentage将添加到当前百分比设置中。 例如，如果设备当前设置为40％，则deltaPercentage值为15表示设备在请求完成后将被设置为25％。是double类型，范围介于0.00和100.00之间（含）。如果deltaPercentage值在允许的范围内，但超出了目标设备允许的最小值，则返回ValueOutOfRangeError，并且不会更改设备设置。 | 是 |

_DecrementPercentageRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": " DecrementPercentageRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            },
            "deltaPercentage": {
                "value": 15.0
            }
        }
    }
```

### DecrementPercentageConfirmation

**_小微响应示例_：“好的”** 目的_*：表示设备成功减少了指定的百分比。 这是对_DecrementPercentageRequest*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DecrementPercentageConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_DecrementPercentageConfirmation_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "DecrementPercentageConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

## Brightness Messages
以下这些消息类型，以增加或减少百分比的形式设置灯的亮度属性。 _SetBrightnessRequest_ SetBrightnessConfirmation _IncrementBrightnessRequest_ IncrementBrightnessConfirmation _DecremenBrightnessRequest_ DecrementBrightnessConfirmation

### SetBrightnessRequest
**示例语句**：
“小微，设置{设备名}亮度到50%”
**目的**：请求以指定的百分比调整指定设备的亮度。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | SetBrightnessRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| brightness | 设置的亮度百分比。 范围从0到100（含）。 | 是 |

_SetBrightnessRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "SetBrightnessRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            },
            "brightness": {
                "value": 50.0
            }
        }
    }
```

### SetBrightnessConfirmation
**_小微响应示例_：“好的”** 目的_*：表示设备已成功调整了指定的亮度。 这是对_SetBrightnessRequest*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header

| 属性 | 值 |
| --- | --- |
| name | SetBrightnessConfirmation |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "SetBrightnessConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

### IncrementBrightnessRequest

**示例语句**：
“小微，{设备名}调高亮度20%”
**目的**：以指定增加的百分比调整指定设备的亮度设置。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | IncrementBrightnessRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：`_ - = # ; : ? @ &`。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| deltaBrightness | 对于此指令，deltaBrightness将添加到当前百分比设置中。 例如，如果设备当前设置为40％，则deltaBrightness值为15表示设备在请求完成后将被设置为55％。是double类型，范围介于0.00和100.00之间（含）。如果deltaBrightness值在允许的范围内，但超出了目标设备允许的最大值，则返回ValueOutOfRangeError，并且不会更改设备设置。 | 是 |

_IncrementBrightnessRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "IncrementBrightnessRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            },
            "deltaBrightness": {
                "value": 10.0
            }
        }
    }
```

### IncrementBrightnessConfirmation

**_小微响应示例_：“好的”** 目的_*：表示设备成功增加了亮度的百分比。 这是对_IncrementBrightnessRequest*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | IncrementBrightnessConfirmation |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "IncrementBrightnessConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

### DecrementBrightnessReques
**示例语句**：
“小微，{设备名}亮度调低20%”
**目的**：以指定减小的百分比调整指定设备的亮度设置。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DecrementBrightnessRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| appliance object | 执行操作的设备。 | 是 |
| appliance.applianceID | 设备标识符。 标识符在技术适配器的域内的最终用户拥有的所有设备上必须是唯一的。 此外，标识符需要在同一设备的多个发现请求之间保持一致。 标识符可以包含任何字母或数字和以下特殊字符：_ - = # ; : ? @ &。 该值不能超过256个字符。 | 是 |
| appliance.additionalApplianceDetails | 提供关于技能适配器使用的设备的附加信息的字符串名称/值对。 该属性的内容不能超过5000字节。 而且，Smart Home Skill API即不理解也不使用这些数据。 | 是，但列表可以为空。 |
| deltaBrightness | 对于此指令，deltaBrightness将添加到当前百分比设置中。 例如，如果设备当前设置为40％，则deltaBrightness值为15表示设备在请求完成后将被设置为25％。是double类型，范围介于0.00和100.00之间（含）。如果deltaBrightness值在允许的范围内，但超出了目标设备允许的最小值，则返回ValueOutOfRangeError，并且不会更改设备设置。 | 是 |

_DecrementBrightnessRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "DecrementBrightnessRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "appliance": {
                "additionalApplianceDetails": {},
                "applianceId": "[Device ID]"
            },
            "deltaBrightness": {
                "value": 15.0
            }
        }
    }
```

### DecrementBrightnessConfirmation
**_小微响应示例_：“好的”** 目的_*：表示设备成功减少了亮度的百分比。 这是对_DecrementBrightnessRequest*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DecrementBrightnessConfirmation |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "DecrementBrightnessConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

## 场景控制消息(Scenes Control Messages)
这些消息类型用来对场景进行控制 _ActivationSenceRequest_ ActivationSenceConfirmation _DeactivateSenceRequest_ DeactivateSenceConfirmation

### ActivationSenceRequest
**示例语句**：
“小微，开启回家模式”
**目的**：激活回家场景。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | ActivationSenceRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| sceneName | 场景名称。 | 是 |

_ActivationSenceRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": " ActivationSenceRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "sceneId": "uniqueSceneId"
        }
    }
```

### ActivationSenceConfirmation
**_小微响应示例_：“好的”** 目的_*：表示设备成功进入场景模式。 这是对_ActivationSenceConfirmation*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | ActivationSenceConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_ActivationSenceConfirmation_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "ActivationSenceConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

### DeactivateSenceRequest
**示例语句**：
“小微，关闭回家模式”
**目的**：关闭回家场景。 从Smart Home Skill API发送到技能适配器。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DeactivateSenceRequest |
| namespace | SmartHome.Control |

#### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| accessToken | 与客户的设备云帐户相关的访问令牌。 | 是 |
| sceneName | 场景名称。 | 是 |

_DeactivateSenceRequest_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": " DeactivateSenceRequest",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {
            "accessToken": "[OAuth token here]",
            "sceneId": "uniqueSceneId"
        }
    }
```

### DeactivateSenceConfirmation

**_小微响应示例_：“好的”** 目的_*：表示设备成功退出场景模式。 这是对_DeactivateSenceConfirmation*的预期响应，并从技能适配器发送到Smart Home Skill API。

#### Header
| 属性 | 值 |
| --- | --- |
| name | DeactivateSenceConfirmation |
| namespace | SmartHome.Control |

#### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_DeactivateSenceConfirmation_示例：

```
    {
        "header": {
            "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
            "name": "DeactivateSenceConfirmation",
            "namespace": "SmartHome.Control",
            "payloadVersion": "1"
        },
        "payload": {}
    }
```

## Error Messages

当Smart Home Skill API向您的技能适配器发送控制请求时，可能会出现不同种类的错误，如果需要，您的技能适配器应使用适当的错误类型和相应信息进行响应。 然而，智能家居技能不需要返回每个错误类型; 只有那些符合发生故障类型的错误才需要返回。本节中列出了错误类型和详细信息。 除非另有说明，否则错误消息不适用于设备发现，并且不应返回错误消息作为对DiscoverAppliancesRequest的响应。

**用户错误**：由于客户发出无效请求时导致的错误。 例如，客户要求将恒温器设置为1000度。 _ValueOutOfRangeError_ TargetOfflineError _NoSuchTargetError_ BridgeOfflineError

**技能适配器错误**：当请求有效，但由于硬件问题或限制，技能适配器无法完成所需的任务时，会发生这些错误。 _DriverInternalError_ DependentServiceUnavailableError _NotSupportedInCurrentModeError_ RateLimitExceededError _TargetBridgeConnectivityUnstableError_ TargetFirmwareOutdatedError _TargetBridgeFirmwareOutdatedError_ TargetHardwareMalfunctionError _TargetBridgetHardwareMalfunctionError_ TargetConnectivityUnstableError _TargetHardwareMalfunctionError_ UnableToGetValueError _UnableToSetValueError_ UnwillingToSetValueError _TargetSceneNotExistError_ NotSupportedSceneActionError * SceneActionHandleError

**其他错误**：当请求中的内容无法满足请求、认证令牌无效，或者技能适配器无法满足请求时的一些错误。 _ExpiredAccessTokenError_ InvalidAccessTokenError _UnsupportedTargetError_ UnsupportedOperationError _UnsupportedTargetSettingError_ UnexpectedInformationReceivedError

### 用户错误
当客户给出不正确的或云平台小微无法完成的指示时，会发生以下错误。

#### ValueOutOfRangeError

**目的**：表示客户请求将目标值设置为超出其支持范围的值。 例如，一位客户问：“小微，将空调设置为1000度”。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| minimumValue | 目标设备设置允许的最小值，double数值类型。 | 是 |
| maximumValue | 目标设备设置允许的最大值，double数值类型。 | 是 |

_ValueOutOfRangeError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"ValueOutOfRangeError",
        "payloadVersion":"1"
      },
      "payload":{
        "minimumValue":15.0,
        "maximumValue":30.0
      }
    }
```

#### TargetOfflineError
**目的**：表示目标设备未连接到客户的设备云或不在。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_TargetOfflineError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"TargetOfflineError",
        "payloadVersion":"1"
      },
      "payload":{
      }
    }
```

#### NoSuchTargetError

**目的**：表示无法找到目标设备，意味着终端用户从未配置。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_NoSuchTargetError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"NoSuchTargetError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### BridgeOfflineError

**目的**：表示目标设备连接到已关闭电源的家庭自动化集线器或网桥。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_BridgeOfflineError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"BridgeOfflineError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

### 技能适配器错误

当技能适配器与启用云的设备或设备云交互时出现问题时，会发生以下错误。在这些情况下，客户请求有效，但由于某种原因无法完成。

#### DriverInternalError
**目的**：表示技能适配器中的通用运行时错误。如果可能，应该返回更具体的错误。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_DriverInternalError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"DriverInternalError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### DependentServiceUnavailableError
**目的**：表示技能适配器依赖的后端服务不可用，技能适配器无法完成请求。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| dependentServiceName | 被依赖的不可用服务名。必须以字母数字字符和空格指定，超过256个字符将被截断。 | 是 |

_DependentServiceUnavailableError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"DependentServiceUnavailableError",
        "payloadVersion":"1",
      },
      "payload":{
        "dependentServiceName":"Customer Credential Database"
      }
    }
```

#### TargetConnectivityUnstableError

**目的**：表示目标设备的云连接不稳定可靠。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_TargetConnectivityUnstableError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"TargetConnectivityUnstableError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### TargetBridgeConnectivityUnstableError

**目的**：表示连接目标设备的家庭自动化集线器或网桥的云连接不稳定和不可靠。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_TargetBridgeConnectivityUnstableError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"TargetBridgeConnectivityUnstableError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### TargetFirmwareOutdatedError
**目的**：表示目标设备的固件已过期。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| minimumFirmwareVersion | 表示最低允许的固件版本，不能超过256个字符。 | 是 |
| currentFirmwareVersion | 表示当前固件版本，不能超过256个字符。 | 是 |

_TargetFirmwareOutdatedError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"TargetFirmwareOutdatedError",
        "payloadVersion":"1",
      },
      "payload":{
        "minimumFirmwareVersion":"17",
        "currentFirmwareVersion":"6"
      }
    }
```

#### TargetBridgeFirmwareOutdatedError
**目的**表示连接目标设备的家庭自动化集线器或网桥具有过时的固件。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| minimumFirmwareVersion | 表示最低允许的固件版本，不能超过256个字符。 | 是 |
| currentFirmwareVersion | 表示当前固件版本，不能超过256个字符。 | 是 |

_TargetBridgeFirmwareOutdatedError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"TargetBridgeFirmwareOutdatedError",
        "payloadVersion":"1",
      },
      "payload":{
        "minimumFirmwareVersion":"17",
        "currentFirmwareVersion":"6"
      }
    }
```

#### TargetHardwareMalfunctionError
**目的**：表示目标设备遇到硬件故障。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_TargetHardwareMalfunctionError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"TargetHardwareMalfunctionError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### TargetBridgeHardwareMalfunctionError
**目的**：表示连接目标设备的家庭自动化集线器或桥接器出现硬件故障。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_TargetHardwareMalfunctionError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"TargetHardwareMalfunctionError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### UnableToGetValueErro
**目的**：表示尝试在目标设备上获取指定值时发生错误。当返回此错误时，适当的errorInfo.code值使得小微能够适应不同类型的故障。您只需生成适用于目标设备的错误代码。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| errorInfo | 描述为什么不能获取指定值的错误对象。 | 是 |
| errorInfo.code | 字符串格式的错误代码。有效值是：DEVICE_AJAR：由于门打开，无法获得指定的状态；DEVICE_BUSY：设备正忙；DEVICE_JAMMED：设备卡住；DEVICE_OVERHEATED：设备过热；HARDWARE_FAILURE：由于未确定的硬件故障，请求失败；LOW_BATTERY：设备的电池电量不足；NOT_CALIBRATED：设备未校准。 | 是 |
| errorInfo.Description | 来自设备制造商的错误的自定义描述。 | 否 |

_UnableToGetValueError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Query",
        "name":"UnableToGetValueError",
        "payloadVersion":"1",
      },
      "payload":{
        "errorInfo":{
          "code":"DEVICE_JAMMED",
          "description":"A custom description of the error.."
        }
      }
    }
```

#### UnableToSetValueError

**目的**：表示尝试在目标设备上设置指定值时发生错误。当返回此错误时，适当的errorInfo.code值使得小微能够适应不同类型的故障。您只需要生成适合于目标设备的错误代码。

##### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| errorInfo | 描述为什么不能设置值的错误对象。 | 是 |
| errorInfo.code | 字符串格式的错误代码。有效值是：DEVICE_AJAR：由于门打开，无法设置指定的状态；DEVICE_BUSY：设备正忙；DEVICE_JAMMED：设备卡住；DEVICE_OVERHEATED：设备过热；HARDWARE_FAILURE：由于未确定的硬件故障，请求失败；LOW_BATTERY：设备的电池电量不足；NOT_CALIBRATED：设备未校准。 | 是 |
| errorInfo.Description | 来自设备制造商的错误的自定义描述。 | 否 |

_UnableToSetValueError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"UnableToSetValueError",
        "payloadVersion":"1",
      },
      "payload":{
        "errorInfo":{
          "code":"DEVICE_BUSY",
            "description":"A custom description of the error"
        }
      }
    }
```

#### UnwillingToSetValueError

**目的**：表示目标设备制造商由于特定原因不愿意在指定的设备上设置请求的值。对温度设置使用此错误。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| errorInfo | 描述为什么不能设置值的错误对象。 | 是 |
| errorInfo.code | 字符串格式的错误代码。目前，代码的有效值为ThermostatIsOff，表示由于恒温器关闭，制造商不愿自动将其启动，因此所请求的操作被拒绝。 | 是 |
| errorInfo.description|来自设备制造商的错误的自定义描述。 | 否 |

_UnwillingToSetValueError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"UnwillingToSetValueError",
        "payloadVersion":"1",
      },
      "payload":{
        "errorInfo":{
          "code":"ThermostatIsOff",
          "description":"The requested operation is unsafe because it requires changing the mode."
        }
      }
    }
```

#### TargetSceneNotExistError
**目的**：对应的场景不存在，即返回的场景ID不属于发现设备时拉取的场景列表里面的ID。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_TargetSceneNotExistError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"TargetSceneNotExistError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### NotSupportedSceneActionError

**目的**：对应的场景不支持该操作，即拉取用户场景列表时对应场景actions字段不包含此项操作。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_NotSupportedSceneActionError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"NotSupportedSceneActionError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### SceneActionHandleError
**目的**：场景操作失败。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_SceneActionHandleError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"SceneActionHandleError",
        "payloadVersion":"1",
      },
      "payload":{
      }
    }
```

#### RateLimitExceededError

**目的**：表示超出设备接受的最大请求数。此消息提供有关设备的最大请求数和这些请求的时间单位的信息。例如，如果设备每小时接受四个请求，则消息应分别指定4和HOUR作为rateLimit和timeUnit。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| rateLimit | 一个整数，表示设备在指定的时间单位中接受的最大请求数。 | 是 |
| timeUnit | 一个字符串，表示rateLimit的时间单位，如MINUTE，HOUR或DAY。 | 是 |

_RateLimitExceededError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"RateLimitExceededError",
        "payloadVersion":"1",
      },
      "payload":{
        "errorInfo":{
          "rateLimit":"10",
          "timeUnit":"HOUR"
        }
      }
    }
```

#### NotSupportedInCurrentModeError

**目的**：表示目标设备处于无法通过Smart Home Skill API进行控制的模式，并提供有关设备当前模式的信息。 对于指示灯，请将currentDeviceMode值设置为COLOR后返回此错误，以指示对当前设置为HSB颜色的指示灯进行了IncrementColorTemperature或DecrementColorTemperature请求。在这种情况下，小微回答说：“只有当你的灯光颜色被设置成白色时才能调整色温。”

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| currentDeviceMode | 表示设备当前模式的字符串。有效值为AUTO，AWAY，COLOR，COOL，HEAT和OTHER。 | 是 |

_NotSupportedInCurrentModeError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"NotSupportedInCurrentModeError",
        "payloadVersion":"1",
      },
      "payload":{
        "currentDeviceMode":"AWAY"
      }
```

### 其他错误
当一个或多个请求输入无效并且技能适配器无法处理时，会发生以下错误。例如，认证令牌无效。

#### ExpiredAccessTokenError
**目的**：表示用于认证的访问令牌已过期，不再有效。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_ExpiredAccessTokenError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"ExpiredAccessTokenError",
        "payloadVersion":"1",
      },
      "payload":{
      }
```

#### InvalidAccessTokenError

目的：表示用于身份验证的访问令牌无效。令牌过期请使用ExpiredAccessTokenError。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_InvalidAccessTokenError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":" InvalidAccessTokenError",
        "payloadVersion":"1",
      },
      "payload":{
      }
```

#### UnsupportedTargetError
**目的**：表示技能适配器不支持目标设备。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_UnsupportedTargetError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"UnsupportedTargetError",
        "payloadVersion":"1",
      },
      "payload":{
      }
```

#### UnsupportedOperationError

**目的**：表示目标设备不支持请求的操作。

##### Payload

| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_UnsupportedOperationError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":" UnsupportedOperationError",
        "payloadVersion":"1",
      },
      "payload":{
      }
```

#### UnsupportedTargetSettingError

**目的**：表示所请求的设置对于指定的设备和操作无效。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| None | 无需返回任何字段。 | N/A |

_UnsupportedTargetSettingError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"UnsupportedTargetSettingError",
        "payloadVersion":"1",
      },
      "payload":{
      }
```

#### UnexpectedInformationReceivedError
**目的**：技能适配器由于请求消息中格式不正确或者意料之外的字段或者属性导致无法处理。

##### Payload
| 属性 | 描述 | 是否必需 |
| --- | --- | --- |
| faultingParameter | 请求消息中格式不正确或者意料之外的字段或者属性。 | 是 |

_UnexpectedInformationReceivedError_示例：

```
    {
      "header":{
        "messageId": "9422676d-2356-4aa7-aa88-c642f12bfcd6",
        "namespace":"SmartHome.Control",
        "name":"UnexpectedInformationReceivedError",
        "payloadVersion":"1",
      },
      "payload":{
        "faultingParameter": "value"
      }
```
